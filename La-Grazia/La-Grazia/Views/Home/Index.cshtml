@model HomeViewModel
@inject UserManager<User> userManager

@{
    ViewData["Title"] = "Home Page";
    List<WishlistProductViewModel> wishlists = ViewBag.Wishlists;
    User member = User.Identity.IsAuthenticated ? userManager.Users.FirstOrDefault(x => x.UserName == User.Identity.Name && !x.IsAdmin) : null;

}

@if (TempData["Order"] != null)
{
    if ((bool)TempData["Order"] == true)
    {
        <input type="hidden" id="orderSuccess" />
    }
    else
    {
        <input type="hidden" id="orderError" />

    }
}

@if (TempData["Register"] != null)
{
    if ((bool)TempData["Register"] == true)
    {
        <input type="hidden" id="registerSuccess" />
    }
    else
    {
        <input type="hidden" id="registerError" />

    }
}

@if (TempData["Login"] != null)
{
    if ((bool)TempData["Login"] == true)
    {
        <input type="hidden" id="loginSuccess" />
    }
    else
    {
        <input type="hidden" id="loginError" />

    }
}

@if (member != null)
{
    <input hidden class="hidden-member" value="@member.FullName" />
}

<!-- Main Slider Area Start Here -->
<main>
    <div class="container-fluid p-0">
        <div class="row">
            <div class="slider">
                <div class="arrows">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#000" class="bi bi-chevron-left" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z" />
                    </svg>
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#000" class="bi bi-chevron-right" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z" />
                    </svg>
                </div>

                @for (int i = 0; i < Model.Sliders.Count; i++)
                {
                    <div class="slider-item @(i==0?"active":"")">
                        <img src="~/assets/images/@Model.Sliders[i].Image" alt="" class="slider-img">
                    </div>
                }

                <div class="slider-main-img" data-aos="fade-down" data-aos-duration="1000">
                    <img src="~/assets/images/Logo.png" alt="">
                </div>
            </div>
        </div>
    </div>
</main>
<!-- Main Slider Area End Here -->

<!-- Who We Are Area Start Here -->
<div class="about-style-3">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-7">
                <div class="section-title-wrapper">
                    <span class="title-highlighter highlighter-primary2"><i class="fal fa-star"></i>LA GRAZIA</span>
                    <h2 class="title">DIVERSITY</h2>
                </div>
                <div class="row">
                    <div class="col-sm-6">
                        <div class="about-features">
                            <div class="spam sl-number">1.</div>
                            <h4 class="title">Woman's Fragrances</h4>
                            <p>Our collection of women perfumes is like a closet where each garment offers and the olfactory nuances that express all facets of women’s radiance and fulfillment.</p>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div class="about-features">
                            <div class="spam sl-number">2.</div>
                            <h4 class="title">Men's Fragrances</h4>
                            <p>Composed like an olfactory symphony, our collection of fragrances for men grants them freedom to express their personality with exceptional fragrances.</p>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div class="about-features">
                            <div class="spam sl-number">3.</div>
                            <h4 class="title">Neuter Fragrances</h4>
                            <p>Our collection of neuter fragrances is composed of rare perfumes that unite man and woman in a shared story, a shared wake.</p>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div class="about-features">
                            <div class="spam sl-number">4.</div>
                            <h4 class="title">Discovery Sets</h4>
                            <p>Delve into the world of Maison Francis Kurkdjian with our discovery collections. Explore unique scents with perfume sets which will stir memories.</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-5">
                <div class="about-gallery">
                    <div class="row row--10">
                        <div class="col-6">
                            <div class="thumbnail thumbnail-1">
                                <img src="./assets/images/About Maison.jpg" alt="About">
                            </div>
                            <div class="thumbnail thumbnail-2">
                                <img src="./assets/images/About Maison2.jpg" alt="About">
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="thumbnail thumbnail-3">
                                <img src="./assets/images/MaisonLong.jpeg" alt="About">
                            </div>
                            <div class="thumbnail thumbnail-4">
                                <img src="./assets/images/Maison2.jpg" alt="About">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Who We Are Area End Here-->

<!-- Discount Area Start Here -->
<section class="top-sale" style="background-image: url(./assets/images/Red2.jpeg);">
    <div class="container">
        <div class="row">
            <div class="top-sale-main">
                <h3>Special 8th of March Discount!</h3>
                <h1>UP TO 50% OFF!</h1>
                <a asp-controller="product" asp-action="index" class="button">SHOP NOW</a>
            </div>
        </div>
    </div>
</section>
<!-- Discount Area End Here -->

<!-- Feature Products Area Start Here -->
<section class="feature-products">
    <div class="container">
        <div class="row feature-products-main">
            <h5>Best Collection of</h5>
            <h2>LA GRAZIA FRAGRANCES</h2>
            <div class="target-buttons">
                <a data-target="bestsellers-products" class="button active" href="">BESTSELLERS</a>
                <a data-target="populars-products" class="button" href="">POPULARS</a>
            </div>
            <div class="container products-box active" id="bestsellers-products">
                <div class="row">
                    @foreach (var item in Model.FeaturedProducts)
                    {
                        <div class="col-3">
                            <div class="product-card">
                                <div class="card-img">
                                    <a asp-controller="product" asp-action="detail" asp-route-id="@item.Id">
                                        <img src="~/assets/images/@item.ProductImages.FirstOrDefault()?.Image" alt="">
                                    </a>
                                    <div class="product-icons">
                                        @if (wishlists != null)
                                        {
                                            @if (!wishlists.Any(f => f.ProductId == item.Id))
                                            {
                                                <a href="" class="wishlist-button add-wishlist-btn" data-id="@item.Id">
                                                    <i class="far fa-heart"></i>
                                                </a>
                                            }
                                            else
                                            {
                                                <a href="" class="wishlist-button add-wishlist-btn" data-id="@item.Id">
                                                    <i class="fas fa-heart"></i>
                                                </a>
                                            }
                                        }
                                        else
                                        {
                                            <a href="" class="wishlist-button add-wishlist-btn" data-id="@item.Id">
                                                <i class="far fa-heart"></i>
                                            </a>
                                        }

                                        <a href="" class="add-basket-btn" data-id="@item.Id">
                                            <i class="fas fa-shopping-cart"></i>
                                        </a>

                                        <a data-bs-toggle="modal" data-bs-target="#productModal" class="show-product-modal" data-id="@item.Id">
                                            <i class="fas fa-expand-alt"></i>
                                        </a>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <h5>@item.Name</h5>
                                    <div class="product-rate">
                                        @for (int i = 1; i <= 5; i++)
                                        {
                                            if (i <= item.Rate)
                                            {
                                                <i class="fas fa-star"></i>
                                            }
                                            else
                                            {
                                                <i class="far fa-star"></i>
                                            }
                                        }
                                    </div>
                                    <div class="product-price">
                                        <span>€@item.SalePrice</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                </div>
            </div>

            <div class="container products-box" id="populars-products">
                <div class="row">
                    @foreach (var item in Model.PopularProducts)
                    {
                        <div class="col-3">
                            <div class="product-card">
                                <div class="card-img">
                                    <a asp-controller="product" asp-action="detail" asp-route-id="@item.Id">
                                        <img src="~/assets/images/@item.ProductImages.FirstOrDefault()?.Image" alt="">
                                    </a>
                                    <div class="product-icons">
                                        @if (wishlists != null)
                                        {
                                            @if (!wishlists.Any(f => f.ProductId == item.Id))
                                            {
                                                <a href="" class="wishlist-button add-wishlist-btn" data-id="@item.Id">
                                                    <i class="far fa-heart"></i>
                                                </a>
                                            }
                                            else
                                            {
                                                <a href="" class="wishlist-button add-wishlist-btn" data-id="@item.Id">
                                                    <i class="fas fa-heart"></i>
                                                </a>
                                            }
                                        }
                                        else
                                        {
                                            <a href="" class="wishlist-button add-wishlist-btn" data-id="@item.Id">
                                                <i class="far fa-heart"></i>
                                            </a>
                                        }

                                        <a href="" class="add-basket-btn" data-id="@item.Id">
                                            <i class="fas fa-shopping-cart"></i>
                                        </a>

                                        <a data-bs-toggle="modal" data-bs-target="#productModal" class="show-product-modal" data-id="@item.Id">
                                            <i class="fas fa-expand-alt"></i>
                                        </a>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <h5>@item.Name</h5>
                                    <div class="product-rate">
                                        @for (int i = 1; i <= 5; i++)
                                        {
                                            if (i <= item.Rate)
                                            {
                                                <i class="fas fa-star"></i>
                                            }
                                            else
                                            {
                                                <i class="far fa-star"></i>
                                            }
                                        }
                                    </div>
                                    <div class="product-price">
                                        <span>€@item.SalePrice</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Feature Products Area End Here -->

<!-- Clock Area Start Here -->
<div class="container" style="background-image: url('./assets/images/Womensday.jpeg')">
    <div class="poster d-flex my-5">
        <div class="row">
            <div class="col-lg-6 col-12">
                <div class="main-content">
                    <h5 class="fw-bold">Get Your La Grazia Fragrance!</h5>
                    <div id="clockdiv-p">
                        <div>
                            <span class="days"></span>
                        </div>
                        <div class="dot">:</div>
                        <div>
                            <span class="hours"></span>
                        </div>
                        <div class="dot">:</div>
                        <div>
                            <span class="minutes"></span>
                        </div>
                        <div class="dot">:</div>

                        <div>
                            <span class="seconds"></span>
                        </div>
                    </div>
                    <button type="button" class="btn btn-primary btn-lg">Check It Out</button>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Clock Area End Here -->

<!-- Clients' Feedback Area Start Here -->
@if (Model.Reviews.Count() > 0)
{
    <section class="feedbacks" style="background-image: url('./assets/images/Feedbacks.png')">
        <div class="container">
            <div class="row feedbacks-main">
                <h3>Clients Feedback</h3>
                <div class="arrows">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#000" class="bi bi-chevron-left" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z" />
                    </svg>
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#000" class="bi bi-chevron-right" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z" />
                    </svg>
                </div>
                @for (int i = 0; i < Model.Reviews.Count; i++)
                {
                    <div class="feedback-box @(i==0?"active":"")">
                        <div class="feedback-user">
                            <p>
                                "@Model.Reviews[i].Context."
                            </p>
                            <div class="user-box">
                                <div class="user-img">
                                    <img src="~/assets/images/user.png" alt="">
                                </div>
                                <div class="user-name">
                                    @*<span>@Model.Reviews[i].User.FullName</span>*@
                                    <span>Member</span>
                                </div>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>
    </section>
}
<!-- Clients' Feedback Area End Here -->

<!-- Collaborations Area Start Here -->
<section class="collabs">
    <div class="container">
        <div class="row">
            <div class="col-6">
                <div>
                    <img src="~/assets/images/About Maison.jpg" alt="" class="collabs-left-img">
                </div>
            </div>
            <div class="col-6">
                <div class="collabs-right">
                    <h5>LA GRAZIA</h5>
                    <h2>RECENT COLLABORATIONS</h2>
                    <div class="container">
                        <div class="row collabs-right-images">
                            @foreach (var item in Model.Collaborations)
                            {
                                <div class="col-4">
                                    <img src="~/assets/images/@item.Image" alt="">
                                </div>
                            }
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Collaborations Area End Here -->

<!-- Newsletter Area Start Here -->
<section class="last-news" style="background-image: url('./assets/images/Newsletter.jpg');">
    <div class="container">
        <div class="row last-news-main">
            <div class="top-news-main">
                <h2>Newsletter</h2>
                <h5>SIGN UP FOR LATEST NEWS</h5>
                <form action="">
                    <input type="text" placeholder="Enter your email address">
                    <a href="" class="button">SUBSCRIBE</a>
                </form>
            </div>
        </div>
    </div>
</section>
<!-- Newsletter Area End Here -->

@section homejs
{
    <script src="~/assets/js/index.js"></script>
    <script>$(document).ready(function () {
            if ($("#orderSuccess").length) {
                toastr["success"]("Your order has been sent for confirmation!", "Congratulations")
            }
            else if ($("#orderError").length) {
                toastr["error"]("Something went wrong!", "Upsss Sorry")
            }
        })</script>

    <script>$(document).ready(function () {
            var member = $('.hidden-member').val();
            if ($("#registerSuccess").length) {
                toastr["success"]("You have successfully joined us!", "Hello" + " " + member)
            }
            else if ($("#registerError").length) {
                toastr["error"]("Something went wrong!", "Upsss Sorry")
            }
        })</script>

    <script>$(document).ready(function () {
            var member = $('.hidden-member').val();
            if ($("#loginSuccess").length) {
                toastr["success"]("Welcome back to us!", "Hello" + " " + member)
            }
            else if ($("#loginError").length) {
                toastr["error"]("Something went wrong!", "Upsss Sorry")
            }
        })</script>
}